<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Software Sales Home</title>
    <link rel="stylesheet" href="https://stackpath.bootstrapcdn.com/bootstrap/4.5.2/css/bootstrap.min.css">
    <link rel="stylesheet" href="css/style.css">
    <link href="https://fonts.googleapis.com/css2?family=Roboto:wght@400;700&display=swap" rel="stylesheet">
    <script src="https://kit.fontawesome.com/4aacb9c22b.js" crossorigin="anonymous"></script>
    <link rel="stylesheet" href="https://fonts.googleapis.com/css2?family=Oxanium:wght@400;700&display=swap">
    <style>
        @import url('https://fonts.googleapis.com/css2?family=Brush+Script+MT&display=swap');
    </style>
</head>
<body>
    <header>
        <div id="menu"></div>
    </header>
    <main>
        <div class="combined-section" style="background: url('images/homepage.png') no-repeat center center; background-size: cover;">
            <div class="overlay">
                <h1>Welcome to Software Sales</h1>
                <p>"Your one-stop shop for the latest and greatest software deals"</p>
                <h2>Discover the Best Software Deals and Latest Releases</h2>
            </div>
        </div>
        <div class="container mt-5 pt-5">
            <div class="row section-margin justify-content-center">
                <section id="latest-software" class="col-md-5 box text-center latest-software box-gap">
                    <a href="softwares.html" class="card-link">
                        <h2>Latest Software</h2>
                        <div class="card software-item">
                            <img src="images/product.jpg" alt="Latest Software" class="img-fluid rounded">
                            <div class="card-body">
                                <p>Explore the newest software available on the market.</p>
                            </div>
                        </div>
                    </a>
                </section>
                <section id="top-deals" class="col-md-5 box text-center top-deals box-gap">
                    <a href="softwares.html" class="card-link">
                        <h2>Top Deals</h2>
                        <div class="card software-item">
                            <img src="images/654a478f1b2ac3a4f32c9fb6_BFCM Deals Blog 2023.png" alt="Top Deals" class="img-fluid rounded">
                            <div class="card-body">
                                <p>Check out the best deals on software to save money.</p>
                            </div>
                        </div>
                    </a>
                </section>
            </div>
            <section id="customer-reviews" class="box section-margin text-center customer-reviews box-gap">
                <h2>Customer Reviews</h2>
                <p>“Great selection of software and amazing deals! Highly recommend.” - John Doe</p>
                <p>“The customer service is excellent, and the prices are unbeatable.” - Jane Smith</p>
                <p>“A one-stop shop for all software needs. Very satisfied with my purchases.” - Mark Johnson</p>
            </section>
        </div>
    </main>
    <script src="https://code.jquery.com/jquery-3.5.1.slim.min.js"></script>
    <script src="https://cdn.jsdelivr.net/npm/@popperjs/core@2.9.2/dist/umd/popper.min.js"></script>
    <script src="https://stackpath.bootstrapcdn.com/bootstrap/4.5.2/js/bootstrap.min.js"></script>
    <script src="js/cart.js"></script>
    <script>
        fetch('menu.html')
            .then(response => response.text())
            .then(data => {
                document.getElementById('menu').innerHTML = data;
                checkLoginState();
                updateCartCount(); // Ensure this function is called to update the cart count
            })
            .catch(error => console.error('Error loading menu:', error));

        // Handle form submission
        document.getElementById('contact-form').addEventListener('submit', function (event) {
            event.preventDefault();
            document.getElementById('form-message').innerText = 'Thank you for your message. We will get back to you shortly.';
            document.getElementById('form-message').style.color = 'green';
            document.getElementById('contact-form').reset();
        });

        // Smooth scrolling effect
        document.querySelectorAll('a[href^="#"]').forEach(anchor => {
            anchor.addEventListener('click', function (event) {
                event.preventDefault();
                document.querySelector(this.getAttribute('href')).scrollIntoView({
                    behavior: 'smooth'
                });
            });
        });

        function checkLoginState() {
            const isLoggedIn = localStorage.getItem('isLoggedIn');
            if (isLoggedIn) {
                document.getElementById('login-link').style.display = 'none';
                document.getElementById('profile-link').style.display = 'block';
            } else {
                document.getElementById('login-link').style.display = 'block';
                document.getElementById('profile-link').style.display = 'none';
            }
        }

        function updateCartCount() {
            const cartCount = document.getElementById('cart-count');
            const cart = JSON.parse(localStorage.getItem('cart')) || [];
            const itemCount = cart.reduce((total, item) => total + item.quantity, 0);
            cartCount.textContent = itemCount;
        }

        document.addEventListener('DOMContentLoaded', checkLoginState);

        // Load the footer
        fetch('footer.html')
            .then(response => response.text())
            .then(data => {
                document.body.insertAdjacentHTML('beforeend', data);
            })
            .catch(error => console.error('Error loading footer:', error));
    </script>
</body>
</html>
